<ejs-pivotview id="PivotView" height="350" beforeServiceInvoke="beforeServiceInvoke">
    <e-datasourcesettings url="https://services.syncfusion.com/aspnet/production/api/pivot/post" mode="Server">
        <e-rows>
            <e-field name="Country"></e-field>
            <e-field name="Products"></e-field>
        </e-rows>
        <e-columns>
            <e-field name="Year" caption="Production Year"></e-field>
        </e-columns>
        <e-values>
            <e-field name="Sold" caption="Units Sold"></e-field>
            <e-field name="Amount" caption="Sold Amount"></e-field>
        </e-values>
        <e-formatsettings>
            <e-field name="Amount" format="C0"></e-field>
            <e-field name="Sold" format="N0"></e-field>
        </e-formatsettings>
    </e-datasourcesettings>
</ejs-pivotview>

<script>
    function beforeServiceInvoke(args) {
        const token = getAuthToken(); // obtain securely at runtime

        args.internalProperties = args.internalProperties || {};
        args.internalProperties.headers = {
            ...(args.internalProperties.headers || {}),
            'Authorization': `Bearer ${token}`
        };
    }

    function getAuthToken() {
        // Retrieve and return a valid auth token securely
        return 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9';
    }

</script>
