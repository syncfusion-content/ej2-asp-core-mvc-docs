<ejs-grid id="Search" dataSource="@ViewBag.DataSource" height="350px" toolbar="@(new List<string>() {"Search" })" actionBegin="actionBegin" actionComplete="actionComplete">
  <e-grid-columns>
    <e-grid-column field="OrderID" headerText="Order ID"  isPrimaryKey="true" width="120"></e-grid-column>
    <e-grid-column field="CustomerID" headerText="Customer ID" width="120"></e-grid-column>
    <e-grid-column field="Freight" headerText="Freight" width="150" format="C2"></e-grid-column>
    <e-grid-column field="ShipCity" headerText="ShipCity" width="120"></e-grid-column>
  </e-grid-columns>
</ejs-grid>

<script>
    var values;
    var key = '';
    var refresh = false;
    var removeQuery = false;
    var valueAssign = false;

    function actionBegin(args) {
        if (args.requestType == 'searching') {
            var grid = document.getElementById("Search").ej2_instances[0];
            const keys = args.searchString.split(',');
            var flag = true;
            var predicate;
            if (keys.length > 1) {
                if (grid.searchSettings.key !== '') {
                    this.values = args.searchString;
                    keys.forEach((key) => {
                        grid.getColumns().forEach((col) => {
                           if (flag) {
                              predicate = new ej.data.Predicate(col.field, 'contains', key, true);
                              flag = false;
                            }
                          else {
                            var predic = new ej.data.Predicate(col.field, 'contains', key, true);
                            predicate = predicate.or(predic);
                           }
                       });
                    });
                 grid.query = new ej.data.Query().where(predicate);
                 grid.searchSettings.key = '';
                 this.valueAssign = true;
                 this.removeQuery = true;
                 grid.refresh();
                }
            }
        }
    }
    function actionComplete(args) {
        if (args.requestType === 'refresh' && this.valueAssign) {
            var grid = document.getElementById("Search").ej2_instances[0];
            const searchBar = document.querySelector('#' + grid.element.id + '_searchbar');
            if (searchBar) {
               searchBar.value = this.values || '';
               this.valueAssign = false;
            }
            else if (args.requestType === 'refresh' && this.removeQuery ) {
                const searchBar = document.querySelector('#' + grid.element.id + '_searchbar');
                if (searchBar) {
                    searchBar.value = '';
                }
            grid.query = new ej.data.Query();
            this.removeQuery = false;
                grid.refresh();
            }
        }
    }
</script>